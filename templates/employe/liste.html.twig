{% extends 'base.html.twig' %}

{% block title %}Register
{% endblock %}
{% block monTitre %}Inscription sur le site
{% endblock %}
{% block navbarlists %}
	<li>
		<a href="{{ path('app_home') }}">Ajouter une opération</a>
		<br/><br/>
		<a href="{{ path('app_home') }}">Liste mes opérations</a>
		<br/><br/>
		<a href="{{ path('liste_employe') }}">Liste des employés</a>
		<br/><br/>
		<a href="{{ path('inscription') }}">Ajouter un employé</a>
		<br/><br/>
		<a href="{{ path('liste_employe') }}">Modifier un employé</a>
		<br/><br/>
		<a href="{{ path('app_home') }}">Ajouter commande client</a>
		<br/><br/>
		<a href="{{ path('app_home') }}">Chiffre d'affaire</a>
	</li>

{% endblock %}
{% block main2 %}
	{% for message in app.flashes('success') %}
		<div class="alert alert-success">
			{{message}}
		</div>
	{% endfor %}
	<table class="table">
		<thead>
			<tr>
				<th scope="col">ID</th>
				<th scope="col">Nom</th>
				<th scope="col">Prenom</th>
				<th scope="col">Email</th>
				<th scope="col">Role</th>
			</tr>
		</thead>
		<tbody>
			{% for employe in employe %}
				<tr>
					<th scope="row">{{ employe.id }}</th>
					<td>{{ employe.nom }}</td>
					<td>{{ employe.prenom }}</td>
					<td>{{ employe.email }}</td>
					{% for employe in employe.roles %}
						<td>{{ employe }}</td>
					{% endfor %}
					<td>
						<a href="{{path('expert_modifier',{'id': employe.id})}}">Modifier
						</a>
					</td>
					<td>
						<form method="POST" action="{{path('employe_delete',{'id': employe.id}) }}">
							<input type="hidden" name="_method" value="delete">
							<input type="hidden" name="_token" value="{{csrf_token('SUP' ~ employe.id)}}">
							<input type="submit" class="btn btn-danger" value="supprimer" onsubmit="return confirm('Confirmer la suppression ?')">
						</form>
					</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>
{% endblock %}
